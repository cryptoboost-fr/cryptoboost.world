<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notifications - CryptoBoost</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
    <script src="auth.js"></script>
</head>
<body class="bg-gray-900 text-white">
    <!-- Header -->
    <header class="bg-gray-800 shadow-lg">
        <nav class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <div class="crypto-logo mr-3">₿</div>
                    <div class="text-2xl font-bold brand-text">CryptoBoost</div>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="user-name text-sm"></span>
                    <button onclick="logout()" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg">Déconnexion</button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <div class="flex">
        <!-- Sidebar -->
        <aside class="w-64 bg-gray-800 min-h-screen">
            <nav class="p-6">
                <ul class="space-y-2">
                    <li><a href="client-dashboard.html" class="nav-btn hover:bg-gray-700 block px-4 py-2 rounded">Dashboard</a></li>
                    <li><a href="client-wallets.html" class="nav-btn hover:bg-gray-700 block px-4 py-2 rounded">Portefeuilles</a></li>
                    <li><a href="client-transactions.html" class="nav-btn hover:bg-gray-700 block px-4 py-2 rounded">Transactions</a></li>
                    <li><a href="client-investments.html" class="nav-btn hover:bg-gray-700 block px-4 py-2 rounded">Investissements</a></li>
                    <li><a href="client-profile.html" class="nav-btn hover:bg-gray-700 block px-4 py-2 rounded">Profil</a></li>
                    <li><a href="client-support.html" class="nav-btn hover:bg-gray-700 block px-4 py-2 rounded">Support</a></li>
                    <li><a href="client-notifications.html" class="nav-btn bg-blue-600 text-white block px-4 py-2 rounded">Notifications</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-8">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-3xl font-bold">Notifications</h1>
                <div class="flex space-x-4">
                    <button onclick="markAllAsRead()" class="btn-secondary px-4 py-2 rounded-lg">Tout marquer comme lu</button>
                    <button onclick="showNotificationSettings()" class="btn-primary px-4 py-2 rounded-lg">Paramètres</button>
                </div>
            </div>

            <!-- Notification Stats -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-gray-800 rounded-lg p-6 glass-effect">
                    <h3 class="text-lg font-semibold text-gray-400">Total</h3>
                    <p class="text-3xl font-bold text-blue-400" id="total-notifications">24</p>
                </div>
                <div class="bg-gray-800 rounded-lg p-6 glass-effect">
                    <h3 class="text-lg font-semibold text-gray-400">Non Lues</h3>
                    <p class="text-3xl font-bold text-red-400" id="unread-notifications">5</p>
                </div>
                <div class="bg-gray-800 rounded-lg p-6 glass-effect">
                    <h3 class="text-lg font-semibold text-gray-400">Aujourd'hui</h3>
                    <p class="text-3xl font-bold text-green-400" id="today-notifications">8</p>
                </div>
                <div class="bg-gray-800 rounded-lg p-6 glass-effect">
                    <h3 class="text-lg font-semibold text-gray-400">Cette Semaine</h3>
                    <p class="text-3xl font-bold text-purple-400" id="week-notifications">15</p>
                </div>
            </div>

            <!-- Filters -->
            <div class="bg-gray-800 rounded-lg p-6 mb-8 glass-effect">
                <div class="flex flex-wrap gap-4 items-center">
                    <div>
                        <label class="block text-sm font-medium mb-2">Filtrer par type</label>
                        <select id="type-filter" class="form-input" onchange="filterNotifications()">
                            <option value="">Tous les types</option>
                            <option value="transaction">Transactions</option>
                            <option value="investment">Investissements</option>
                            <option value="security">Sécurité</option>
                            <option value="system">Système</option>
                            <option value="marketing">Marketing</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Statut</label>
                        <select id="status-filter" class="form-input" onchange="filterNotifications()">
                            <option value="">Tous</option>
                            <option value="unread">Non lues</option>
                            <option value="read">Lues</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Période</label>
                        <select id="period-filter" class="form-input" onchange="filterNotifications()">
                            <option value="">Toutes</option>
                            <option value="today">Aujourd'hui</option>
                            <option value="week">Cette semaine</option>
                            <option value="month">Ce mois</option>
                        </select>
                    </div>
                    <div class="flex-1"></div>
                    <button onclick="clearAllNotifications()" class="btn-danger px-4 py-2 rounded-lg">Supprimer tout</button>
                </div>
            </div>

            <!-- Notifications List -->
            <div class="bg-gray-800 rounded-lg p-6 glass-effect">
                <div id="notifications-list" class="space-y-4">
                    <!-- Transaction Notification -->
                    <div class="notification-item bg-gray-700 rounded-lg p-4 border-l-4 border-green-500 unread" data-type="transaction" data-status="unread" data-date="2024-01-15">
                        <div class="flex justify-between items-start">
                            <div class="flex items-start space-x-4">
                                <div class="notification-icon bg-green-500 text-white rounded-full p-2">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a2 2 0 114 0 2 2 0 01-4 0zm8-2a2 2 0 11-4 0 2 2 0 014 0z"/>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <h3 class="font-semibold text-white">Dépôt confirmé</h3>
                                    <p class="text-gray-300 text-sm">Votre dépôt de 0.5 BTC a été confirmé et ajouté à votre portefeuille.</p>
                                    <p class="text-gray-400 text-xs mt-1">Il y a 2 heures</p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="markAsRead(this)" class="text-blue-400 hover:text-blue-300 text-sm">Marquer comme lu</button>
                                <button onclick="deleteNotification(this)" class="text-red-400 hover:text-red-300 text-sm">Supprimer</button>
                            </div>
                        </div>
                    </div>

                    <!-- Investment Notification -->
                    <div class="notification-item bg-gray-700 rounded-lg p-4 border-l-4 border-blue-500 unread" data-type="investment" data-status="unread" data-date="2024-01-15">
                        <div class="flex justify-between items-start">
                            <div class="flex items-start space-x-4">
                                <div class="notification-icon bg-blue-500 text-white rounded-full p-2">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <h3 class="font-semibold text-white">Nouveau gain d'investissement</h3>
                                    <p class="text-gray-300 text-sm">Votre plan Premium a généré +2.5% de profit aujourd'hui (+$125.50).</p>
                                    <p class="text-gray-400 text-xs mt-1">Il y a 4 heures</p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="markAsRead(this)" class="text-blue-400 hover:text-blue-300 text-sm">Marquer comme lu</button>
                                <button onclick="deleteNotification(this)" class="text-red-400 hover:text-red-300 text-sm">Supprimer</button>
                            </div>
                        </div>
                    </div>

                    <!-- Security Notification -->
                    <div class="notification-item bg-gray-700 rounded-lg p-4 border-l-4 border-yellow-500 unread" data-type="security" data-status="unread" data-date="2024-01-15">
                        <div class="flex justify-between items-start">
                            <div class="flex items-start space-x-4">
                                <div class="notification-icon bg-yellow-500 text-white rounded-full p-2">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <h3 class="font-semibold text-white">Nouvelle connexion détectée</h3>
                                    <p class="text-gray-300 text-sm">Connexion depuis Paris, France. Si ce n'est pas vous, sécurisez votre compte.</p>
                                    <p class="text-gray-400 text-xs mt-1">Il y a 6 heures</p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="markAsRead(this)" class="text-blue-400 hover:text-blue-300 text-sm">Marquer comme lu</button>
                                <button onclick="deleteNotification(this)" class="text-red-400 hover:text-red-300 text-sm">Supprimer</button>
                            </div>
                        </div>
                    </div>

                    <!-- System Notification -->
                    <div class="notification-item bg-gray-700 rounded-lg p-4 border-l-4 border-purple-500 read" data-type="system" data-status="read" data-date="2024-01-14">
                        <div class="flex justify-between items-start">
                            <div class="flex items-start space-x-4">
                                <div class="notification-icon bg-purple-500 text-white rounded-full p-2">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <h3 class="font-semibold text-white">Maintenance programmée</h3>
                                    <p class="text-gray-300 text-sm">Maintenance système prévue le 20/01 de 2h à 4h. Services temporairement indisponibles.</p>
                                    <p class="text-gray-400 text-xs mt-1">Hier</p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="deleteNotification(this)" class="text-red-400 hover:text-red-300 text-sm">Supprimer</button>
                            </div>
                        </div>
                    </div>

                    <!-- Marketing Notification -->
                    <div class="notification-item bg-gray-700 rounded-lg p-4 border-l-4 border-pink-500 read" data-type="marketing" data-status="read" data-date="2024-01-14">
                        <div class="flex justify-between items-start">
                            <div class="flex items-start space-x-4">
                                <div class="notification-icon bg-pink-500 text-white rounded-full p-2">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <h3 class="font-semibold text-white">Nouveau plan VIP disponible</h3>
                                    <p class="text-gray-300 text-sm">Découvrez notre nouveau plan VIP avec jusqu'à 25% de rendement annuel.</p>
                                    <p class="text-gray-400 text-xs mt-1">Hier</p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="deleteNotification(this)" class="text-red-400 hover:text-red-300 text-sm">Supprimer</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Empty State -->
                <div id="empty-state" class="hidden text-center py-12">
                    <div class="text-6xl mb-4">🔔</div>
                    <h3 class="text-xl font-semibold mb-2">Aucune notification</h3>
                    <p class="text-gray-400">Vous n'avez aucune notification correspondant aux filtres sélectionnés.</p>
                </div>

                <!-- Load More -->
                <div class="text-center mt-8">
                    <button onclick="loadMoreNotifications()" class="btn-secondary px-6 py-2 rounded-lg">Charger plus</button>
                </div>
            </div>
        </main>
    </div>

    <!-- Notification Settings Modal -->
    <div id="notificationSettingsModal" class="modal-overlay hidden">
        <div class="modal-content max-w-2xl">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Paramètres de Notifications</h2>
                <button onclick="closeModal('notificationSettingsModal')" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            
            <div class="space-y-6">
                <!-- Email Notifications -->
                <div class="bg-gray-700 rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Notifications Email</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <div>
                                <label class="font-medium">Transactions</label>
                                <p class="text-sm text-gray-400">Dépôts, retraits, échanges</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="email-transactions" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <label class="font-medium">Investissements</label>
                                <p class="text-sm text-gray-400">Gains, échéances, nouveaux plans</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="email-investments" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <label class="font-medium">Sécurité</label>
                                <p class="text-sm text-gray-400">Connexions, changements de mot de passe</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="email-security" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <label class="font-medium">Marketing</label>
                                <p class="text-sm text-gray-400">Promotions, nouveaux produits</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="email-marketing">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Push Notifications -->
                <div class="bg-gray-700 rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Notifications Push</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <div>
                                <label class="font-medium">Transactions importantes</label>
                                <p class="text-sm text-gray-400">Montants > 1000€</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="push-transactions" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <label class="font-medium">Alertes de sécurité</label>
                                <p class="text-sm text-gray-400">Connexions suspectes</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="push-security" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="flex justify-between items-center">
                            <div>
                                <label class="font-medium">Gains d'investissement</label>
                                <p class="text-sm text-gray-400">Profits quotidiens</p>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="push-profits" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Frequency Settings -->
                <div class="bg-gray-700 rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Fréquence</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Résumé quotidien</label>
                            <select id="daily-summary" class="form-input w-full">
                                <option value="disabled">Désactivé</option>
                                <option value="morning" selected>Matin (9h)</option>
                                <option value="evening">Soir (18h)</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Rapport hebdomadaire</label>
                            <select id="weekly-report" class="form-input w-full">
                                <option value="disabled">Désactivé</option>
                                <option value="monday" selected>Lundi matin</option>
                                <option value="friday">Vendredi soir</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="flex space-x-4">
                    <button onclick="saveNotificationSettings()" class="btn-primary flex-1">Sauvegarder</button>
                    <button onclick="closeModal('notificationSettingsModal')" class="btn-secondary flex-1">Annuler</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (!protectPage('client')) return;
            updateUserDisplay();
            loadNotifications();
        });

        function loadNotifications() {
            // Load notifications from localStorage or API
            updateNotificationStats();
        }

        function updateNotificationStats() {
            const notifications = document.querySelectorAll('.notification-item');
            const unreadCount = document.querySelectorAll('.notification-item.unread').length;
            const todayCount = document.querySelectorAll('.notification-item[data-date="2024-01-15"]').length;
            
            document.getElementById('total-notifications').textContent = notifications.length;
            document.getElementById('unread-notifications').textContent = unreadCount;
            document.getElementById('today-notifications').textContent = todayCount;
        }

        function filterNotifications() {
            const typeFilter = document.getElementById('type-filter').value;
            const statusFilter = document.getElementById('status-filter').value;
            const periodFilter = document.getElementById('period-filter').value;
            
            const notifications = document.querySelectorAll('.notification-item');
            let visibleCount = 0;
            
            notifications.forEach(notification => {
                let show = true;
                
                if (typeFilter && notification.dataset.type !== typeFilter) show = false;
                if (statusFilter && notification.dataset.status !== statusFilter) show = false;
                if (periodFilter) {
                    const notifDate = new Date(notification.dataset.date);
                    const today = new Date();
                    
                    if (periodFilter === 'today' && notifDate.toDateString() !== today.toDateString()) show = false;
                    if (periodFilter === 'week') {
                        const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);
                        if (notifDate < weekAgo) show = false;
                    }
                    if (periodFilter === 'month') {
                        const monthAgo = new Date(today.getTime() - 30 * 24 * 60 * 60 * 1000);
                        if (notifDate < monthAgo) show = false;
                    }
                }
                
                notification.style.display = show ? 'block' : 'none';
                if (show) visibleCount++;
            });
            
            document.getElementById('empty-state').classList.toggle('hidden', visibleCount > 0);
        }

        function markAsRead(button) {
            const notification = button.closest('.notification-item');
            notification.classList.remove('unread');
            notification.classList.add('read');
            notification.dataset.status = 'read';
            
            button.remove();
            updateNotificationStats();
            showAlert('Notification marquée comme lue', 'success');
        }

        function markAllAsRead() {
            const unreadNotifications = document.querySelectorAll('.notification-item.unread');
            unreadNotifications.forEach(notification => {
                notification.classList.remove('unread');
                notification.classList.add('read');
                notification.dataset.status = 'read';
                
                const markButton = notification.querySelector('button[onclick*="markAsRead"]');
                if (markButton) markButton.remove();
            });
            
            updateNotificationStats();
            showAlert('Toutes les notifications ont été marquées comme lues', 'success');
        }

        function deleteNotification(button) {
            if (confirm('Êtes-vous sûr de vouloir supprimer cette notification ?')) {
                const notification = button.closest('.notification-item');
                notification.remove();
                updateNotificationStats();
                showAlert('Notification supprimée', 'success');
            }
        }

        function clearAllNotifications() {
            if (confirm('Êtes-vous sûr de vouloir supprimer toutes les notifications ?')) {
                const notifications = document.querySelectorAll('.notification-item');
                notifications.forEach(notification => notification.remove());
                updateNotificationStats();
                document.getElementById('empty-state').classList.remove('hidden');
                showAlert('Toutes les notifications ont été supprimées', 'success');
            }
        }

        function loadMoreNotifications() {
            // Simulate loading more notifications
            showAlert('Aucune nouvelle notification à charger', 'info');
        }

        function showNotificationSettings() {
            document.getElementById('notificationSettingsModal').classList.remove('hidden');
        }

        function saveNotificationSettings() {
            // Save settings to localStorage
            const settings = {
                email: {
                    transactions: document.getElementById('email-transactions').checked,
                    investments: document.getElementById('email-investments').checked,
                    security: document.getElementById('email-security').checked,
                    marketing: document.getElementById('email-marketing').checked
                },
                push: {
                    transactions: document.getElementById('push-transactions').checked,
                    security: document.getElementById('push-security').checked,
                    profits: document.getElementById('push-profits').checked
                },
                frequency: {
                    dailySummary: document.getElementById('daily-summary').value,
                    weeklyReport: document.getElementById('weekly-report').value
                }
            };
            
            localStorage.setItem('notificationSettings', JSON.stringify(settings));
            closeModal('notificationSettingsModal');
            showAlert('Paramètres de notifications sauvegardés', 'success');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }
    </script>
</body>
</html>
